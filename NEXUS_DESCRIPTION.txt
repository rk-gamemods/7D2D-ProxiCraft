================================================================================
BRIEF OVERVIEW (350 character limit)
================================================================================

Use items from nearby storage for crafting, reloading, refueling, and repairs. Searches containers, vehicles, drones, and workstations. Includes EXPERIMENTAL multiplayer support with automatic safety protection.

Character count: 213

================================================================================
DETAILED DESCRIPTION (BBCode)
================================================================================

[size=4][b]What Does This Mod Do?[/b][/size]

ProxiCraft lets you use items stored in nearby containers without moving them to your backpack first.

[b]Single-Player Features (Stable):[/b]
[list]
[*]Crafting - Use materials from nearby storage
[*]Block Repair/Upgrade - Pull repair materials from containers
[*]Weapon Reload - Reload with ammo from containers
[*]Vehicle Refuel - Use gas cans from storage
[*]Generator Refuel - Refuel generators from nearby containers
[*]Item Repair - Use repair kits from containers
[*]Lockpicking - Use lockpicks from storage
[*]Painting - Use paint cans from containers
[*]Trader Purchases - Pay with dukes from storage
[*]Challenge Tracker - Container items count toward "Gather X" challenges
[*]HUD Ammo Counter - Shows container ammo in weapon stat bar
[*]Recipe Tracker - Real-time ingredient counts from containers
[*]Locked Slot Respect - Items in locked slots are excluded
[/list]

[b]Storage Sources:[/b]
[list]
[*]Standard containers (chests, boxes, crates)
[*]Vehicle storage (4x4, motorcycle, gyrocopter, minibike)
[*]Drone cargo compartment
[*]Dew collector contents
[*]Workstation output slots (forge, workbench, campfire, chemistry station)
[/list]

[line]

[size=4][b]ğŸ§ª Multiplayer (EXPERIMENTAL)[/b][/size]

ProxiCraft includes experimental multiplayer support with automatic crash protection.

[b]Requirements:[/b] Must be installed on BOTH server AND all clients (same version).

[b]How It Works - "Guilty Until Proven Innocent":[/b]

[code]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Multiplayer Safety Flow                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Client connects to server                                  â”‚
â”‚  â”œâ”€ multiplayerImmediateLock = true? (default)              â”‚
â”‚  â”‚   â””â”€ YES â†’ IMMEDIATE LOCK (storage disabled) â†“           â”‚
â”‚  â”‚                                                          â”‚
â”‚  â”‚   Server sends handshake request                         â”‚
â”‚  â”‚   â”œâ”€ Client responds (has ProxiCraft)?                   â”‚
â”‚  â”‚   â”‚   â””â”€ YES â†’ UNLOCK â†’ Normal operation âœ“               â”‚
â”‚  â”‚   â””â”€ NO response after timeout?                          â”‚
â”‚  â”‚       â””â”€ STAY LOCKED + show culprit name âœ—               â”‚
â”‚  â”‚                                                          â”‚
â”‚  â””â”€ NO â†’ Trust mode (honor system) âš ï¸                       â”‚
â”‚      â””â”€ No lock, relies on all players having mod           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[/code]

[b]Safety Features:[/b]
[list]
[*][b]Immediate Lock[/b] - Storage access blocked instantly when any client connects (zero crash window)
[*][b]Quick Unlock[/b] - Resumes in ~100-300ms after verifying client has mod installed
[*][b]Culprit Identification[/b] - Shows exactly which player needs to install the mod
[*][b]Auto Re-enable[/b] - Mod unlocks when the player without ProxiCraft disconnects
[*][b]Server Config Sync[/b] - Clients automatically use server's settings (range, features, priority)
[/list]

[b]Safety Settings (config.json):[/b]
[code]
{
  "multiplayerImmediateLock": true,
  "multiplayerHandshakeTimeoutSeconds": 10
}
[/code]

[list]
[*][b]multiplayerImmediateLock[/b] (default: true) - Lock mod when clients connect. Set to [b]false[/b] to disable safety lock entirely (honor system - NOT RECOMMENDED except on moderated servers where you enforce mod installation externally).
[*][b]multiplayerHandshakeTimeoutSeconds[/b] (default: 10) - How long to wait before declaring a player doesn't have the mod.
[/list]

âš ï¸ [b]WARNING:[/b] Setting [b]multiplayerImmediateLock=false[/b] removes crash protection. If ANY player joins without ProxiCraft, the server may crash. Only use on servers where you control who joins.

[b]Testing Status:[/b]
[list]
[*]Single player âœ“
[*]Basic dedicated server âœ“
[*]Co-op hosting âš ï¸ (needs more testing)
[*]High-latency connections âš ï¸ (needs more testing)
[*]Large player counts (8+) âš ï¸ (needs more testing)
[/list]

[b]ğŸ› Please Report Bugs![/b] Multiplayer has many edge cases. If you encounter issues:

[b]For crashes (CTD):[/b]
[list=1]
[*]Find [b]output_log.txt[/b] in [b]%APPDATA%\7DaysToDie\logs\[/b]
[*]Also grab [b]network_log.txt[/b] and [b]pc_debug.log[/b] from your ProxiCraft mod folder
[*]Attach these files to your GitHub issue or Nexus comment
[/list]

[b]For non-crash issues:[/b]
[list=1]
[*]Run [b]pc fullcheck[/b] in console (F1)
[*]Find [b]fullcheck_report.txt[/b] in your ProxiCraft mod folder
[*]Describe what happened and attach the report
[/list]

Your reports help make multiplayer stable for everyone!

[line]

[size=4][b]Installation[/b][/size]

[list=1]
[*]Download and extract the zip
[*]Copy [b]ProxiCraft[/b] folder to [b]7 Days To Die/Mods/[/b]
[*]Launch game with EAC disabled
[/list]

[b]Multiplayer:[/b] Install on server AND all clients (same version).

[line]

[size=4][b]Configuration[/b][/size]

Edit [b]config.json[/b] in your mod folder: [b]7 Days To Die/Mods/ProxiCraft/config.json[/b]

After making changes, reload in-game with: [b]pc reload[/b] (F1 console)

[line]

[size=3][b]ğŸ¯ Most Important Settings[/b][/size]

[b]Range - How far to search (in blocks)[/b]
[code]"range": 15[/code]
[list]
[*][b]5[/b] = Same room (tight, fast)
[*][b]15[/b] = Same floor/area (default, balanced) âœ“
[*][b]30[/b] = Entire building (large base)
[*][b]-1[/b] = Unlimited (all loaded chunks - performance impact!)
[/list]

[b]Master Switch[/b]
[code]"modEnabled": true[/code]
Turn the entire mod on/off. Use [b]pc toggle[/b] command to change temporarily.

[line]

[size=3][b]ğŸ“¦ Storage Sources - What Containers to Use[/b][/size]

Toggle which storage types ProxiCraft searches:

[code]
"pullFromVehicles": true,          # 4x4, motorcycle, gyrocopter storage
"pullFromDrones": true,            # Your drone's cargo compartment
"pullFromDewCollectors": true,     # Dew collector contents
"pullFromWorkstationOutputs": true # Finished items from forge, campfire, etc.
"allowLockedContainers": true      # Containers you've unlocked with keys/passwords
[/code]

Set any to [b]false[/b] to exclude that source.

[b]Note:[/b] Standard containers (chests, boxes) are always included.

[line]

[size=3][b]ğŸ“‹ Storage Priority - Search Order[/b][/size]

Controls which containers are checked first. Lower number = higher priority.

[code]
"storagePriority": {
    "Drone": "1",           # Check drones first
    "DewCollector": "2",    # Then dew collectors
    "Workstation": "3",     # Then workstations
    "Container": "4",       # Then regular containers
    "Vehicle": "5"          # Then vehicles last
}
[/code]

[b]How it works:[/b] Items are pulled from first available source. Change numbers to reorder (e.g., set Vehicle to "1" to check vehicles first).

[line]

[size=3][b]âœ¨ Features - What Actions Use Nearby Storage[/b][/size]

[b]Crafting & Building[/b]
[code]
"enableForCrafting": true,         # Craft recipes with container materials
"enableForRepairAndUpgrade": true, # Repair/upgrade blocks with container materials
"enableForPainting": true,         # Paint blocks using paint from containers
[/code]

[b]Combat & Tools[/b]
[code]
"enableForReload": true,           # Reload weapons from containers
"enableForItemRepair": true,       # Repair tools/weapons with repair kits from containers
"enableForLockpicking": true,      # Use lockpicks from containers
[/code]

[b]Vehicles & Power[/b]
[code]
"enableForRefuel": true,           # Refuel vehicles from containers
"enableForGeneratorRefuel": true,  # Refuel generators from containers
[/code]

[b]Economy & Quests[/b]
[code]
"enableForTrader": true,           # Pay traders with dukes from containers
"enableForQuests": true,           # Container items count toward quest objectives
[/code]

Set any to [b]false[/b] to disable that feature.

[line]

[size=3][b]ğŸ–¥ï¸ Display & UI Settings[/b][/size]

[code]
"enableHudAmmoCounter": true,         # Show total ammo (inventory + containers) in HUD
"enableRecipeTrackerUpdates": true,   # Update recipe tracker in real-time
"respectLockedSlots": true            # Don't use items in locked container slots
[/code]

[b]respectLockedSlots:[/b] When [b]true[/b], items you've manually locked in container slots won't be counted or used.

[line]

[size=3][b]ğŸ”§ Advanced Settings[/b][/size]

[b]Debug/Diagnostics[/b]
[code]
"isDebug": false,              # Verbose logging (performance cost - only for troubleshooting)
"verboseHealthCheck": false    # Always show full startup diagnostic
[/code]

[b]Note:[/b] Debug settings are never synced from server - each player controls their own logging.

[b]Multiplayer Safety (CRITICAL)[/b]
[code]
"multiplayerImmediateLock": true,          # Lock mod when clients connect (RECOMMENDED)
"multiplayerHandshakeTimeoutSeconds": 10   # Timeout for verifying client has ProxiCraft
[/code]

[color=#ff0000][b]âš ï¸ WARNING:[/b][/color] Setting [b]multiplayerImmediateLock[/b] to [b]false[/b] removes crash protection! Only use on servers where you enforce ProxiCraft installation externally (whitelist, manual verification).

[b]Enhanced Safety Mode (Recommended for Multiplayer)[/b]
[code]
"enhancedSafetyCrafting": true,
"enhancedSafetyReload": true,
"enhancedSafetyRepairAndUpgrade": true,
"enhancedSafetyVehicleRepair": true,
"enhancedSafetyRefuel": true,
"enhancedSafetyDiagnosticLogging": false
[/code]

These route operations through a centralized safety layer (VirtualInventoryProvider) for more consistent multiplayer behavior. [b]Enabled by default[/b] for better stability. No performance cost. Safe to disable if you only play single-player or experience issues.

[line]

[size=3][b]ğŸ“ Quick Configuration Examples[/b][/size]

[b]Example 1: Search entire building[/b]
[code]"range": 30[/code]

[b]Example 2: Only use crafting and reload features[/b]
[code]
"enableForCrafting": true,
"enableForReload": true,
"enableForRefuel": false,
"enableForTrader": false,
"enableForRepairAndUpgrade": false,
"enableForQuests": false,
"enableForPainting": false,
"enableForLockpicking": false,
"enableForGeneratorRefuel": false,
"enableForItemRepair": false
[/code]

[b]Example 3: Disable vehicle pulling but keep everything else[/b]
[code]"pullFromVehicles": false[/code]

[b]Example 4: Check containers before drones[/b]
[code]
"storagePriority": {
    "Container": "1",
    "Drone": "2",
    "DewCollector": "3",
    "Workstation": "4",
    "Vehicle": "5"
}
[/code]

[line]

[size=3][b]ğŸ’¡ In-Game Configuration Commands[/b][/size]

Press F1 and type:
[list]
[*][b]pc config list[/b] - Show all current settings
[*][b]pc config get range[/b] - Get specific setting value
[*][b]pc set range 30[/b] - Change setting temporarily (not saved)
[*][b]pc config save[/b] - Save current runtime settings to config.json
[*][b]pc reload[/b] - Reload config.json from disk
[*][b]pc toggle[/b] - Quick enable/disable entire mod
[/list]

Full documentation: [url=https://github.com/rk-gamemods/7D2D-ProxiCraft]GitHub[/url]

[line]

[size=4][b]Console Commands[/b][/size]

Press F1, then type:
[list]
[*][b]pc status[/b] - Check if mod is working
[*][b]pc health[/b] - Show feature health check
[*][b]pc test[/b] - See what containers are found
[*][b]pc fullcheck[/b] - Full diagnostic for bug reports
[*][b]pc toggle[/b] - Enable/disable mod
[*][b]pc debug[/b] - Toggle debug logging (writes to pc_debug.log in mod folder)
[*][b]pc set range 30[/b] - Change settings
[/list]

[line]

[size=4][b]Compatibility[/b][/size]

ProxiCraft is compatible with most mods.

[b]Do NOT use with other craft-from-containers mods:[/b]
[list]
[*]CraftFromContainers
[*]BeyondStorage2
[*]Similar "nearby storage" mods
[/list]

Use only ONE mod of this type.

[line]

[size=4][b]Changelog[/b][/size]

[b]v1.2.9 - Multiplayer Safety Improvements[/b]
Addresses reported issue: "Clients cannot open containers, server crashes when other players open anything"
[list]
[*]Added missing IsModAllowed() safety check to container lock/unlock broadcasts
[*]Added defensive dictionary access to prevent potential crashes from concurrent modification
[*]Added throttled diagnostic logging when safety system blocks broadcasts
[/list]
Please report back if you were experiencing multiplayer container issues!

[b]v1.2.8 - Multiplayer Stability Improvements[/b]
Investigating reported crash: "Host crashes when client opens containers"
[list]
[*]Added thread-safe counters for client verification
[*]Added defensive snapshots when iterating container locks during disconnect
[*]Player name now falls back to handshake packet when entity lookup fails
[*]Added crash diagnostics to pc_debug.log
[*]Log file now self-manages size
[/list]
Please report back if you were experiencing multiplayer crashes!

[b]v1.2.7[/b]
[list]
[*]Fixed multiplayer handshake packet loss causing mod to lock up for entire server session
[*]Fixed orphan container locks when players disconnect (containers no longer stay "locked" forever)
[*]Fixed race condition where out-of-order packets could cause ghost locks
[*]Added lock expiration (30 sec default) - ghost locks self-heal quickly
[*]Added retry mechanism for handshake and lock broadcasts on connection hiccups
[*]Improved network diagnostics for troubleshooting
[*]Added robustness improvements for rare edge cases (TileEntity destruction, chunk unload, bounds checks)
[/list]

[b]v1.2.6[/b]
[list]
[*]Fixed config settings being overwritten on game load
[*]Fixed race condition in config file watcher
[*]Fixed potential integer overflow in item count cache
[/list]

[b]v1.2.5[/b]
[list]
[*]Added robust path detection with multiple fallback methods (reported by: restiphani21)
[/list]

[b]v1.2.4[/b]
[list]
[*]Fixed enhanced safety mode breaking features when switching between game sessions
[*]Multiplayer state now properly resets when starting a new game
[*]Fixed block repair not using materials from remote storage [i](reported by falkon311)[/i]
[/list]

[b]v1.2.3[/b]
[list]
[*]Changed enhanced safety mode defaults to enabled (recommended for multiplayer stability)
[*]Configuration documentation expanded with all 30+ settings comprehensively documented
[*][i]Note: Existing users with custom config.json are unaffected - only fresh installations use new defaults[/i]
[/list]

[b]v1.2.2[/b]
[list]
[*]Fixed: Health check report now shows all features in grouped output
[/list]

[b]v1.2.1[/b]
[list]
[*]ğŸ§ª EXPERIMENTAL Multiplayer support with automatic safety protection [i](reported by GreenGhost21, optimus0, GeeButtersnaps)[/i]
[*]Server config sync - clients use server's settings
[*]Configurable storage priority
[*]Bug fixes for pc help, vehicle repair, profiler
[/list]

[b]v1.2.0[/b]
[list]
[*]HUD ammo counter
[*]Locked slot respect
[*]Bug fixes:
  [list]
  [*]Radial menu reload - ammo greyed out when only in containers [i](reported by falkon311)[/i]
  [*]R-key reload blocked when ammo only in containers [i](reported by falkon311)[/i]
  [*]Block upgrades not consuming materials from containers [i](reported by falkon311)[/i]
  [*]Workstation output items counted but not consumed [i](reported by Kaizlin)[/i]
  [*]"Take Like" taking all container contents instead of matching items [i](reported by Kaizlin)[/i]
  [/list]
[/list]

[b]v1.1.0[/b]
[list]
[*]Vehicle, drone, dew collector, workstation support
[*]Recipe tracker updates
[*]Performance optimizations
[/list]

[b]v1.0.0[/b] - Initial release

[line]

[size=4][b]Links[/b][/size]

[url=https://github.com/rk-gamemods/7D2D-ProxiCraft]Source Code & Full Documentation (GitHub)[/url]

[url=https://github.com/rk-gamemods/7D2D-ProxiCraft/issues]Report Issues[/url]

[line]

[size=4][b]Inspiration & Prior Art[/b][/size]

ProxiCraft builds on concepts from:
[list]
[*][url=https://www.nexusmods.com/7daystodie/mods/2196]CraftFromContainers[/url] by aedenthorn - Original concept for A20
[*][url=https://www.nexusmods.com/7daystodie/mods/7809]BeyondStorage2[/url] by gazorper ([url=https://github.com/superguru/7d2d_mod_BeyondStorage2]GitHub[/url]) - Expanded features, storage priority
[/list]

If you prefer their versions, check them out! ProxiCraft is a from-scratch implementation with different architecture.

[line]

[size=3][i]MIT License - Back up saves before installing mods.[/i][/size]
